# Генератор иллюстрированных книг

Этот проект представляет собой веб-приложение для генерации иллюстрированных книг с использованием больших языковых моделей (LLM).

## Описание

Проект состоит из двух основных частей:

*   **Бэкенд**: Написан на Python с использованием Django и Django REST Framework. Он предоставляет API для обработки текста книги, взаимодействия с Google Gemini для генерации структуры книги и иллюстраций, и последующей сборки PDF-файла.
*   **Фронтенд**: Написан на React. Предоставляет пользовательский интерфейс для ввода данных книги и скачивания сгенерированного PDF-файла.

## Структура проекта

```
.
├── backend/         # Django-проект
│   ├── books/       # Приложение для работы с книгами
│   ├── core/        # Основные настройки проекта
│   ├── test_images/ # Тестовые изображения для генерации PDF
│   └── ...
├── frontend/        # React-проект
│   └── src/
└── README.md
```

## Установка и запуск

### Требования

*   Python 3.x
*   Node.js и npm

### Бэкенд

1.  **Перейдите в директорию бэкенда:**
    ```bash
    cd backend
    ```

2.  **Создайте и активируйте виртуальное окружение:**
    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Linux/macOS
    # venv\Scripts\activate    # Для Windows
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements/base.txt
    ```

4.  **Создайте файл `.env`** в директории `backend` на основе `env.example` и укажите ваш `GEMINI_API_KEY`:
    ```
    GEMINI_API_KEY=your_api_key_here
    ```

5.  **Примените миграции:**
    ```bash
    python manage.py migrate
    ```

6. **Создайте админа для django:**
    ```bash
    python manage.py createsuperuser
    ```

    ***По запросу вводим имя для админа, любую почту и свой пароль, например:***
    ```bash
    Username (leave blank to use 'oleg'): admin
    Email address: admin@example.com
    Password:
    Password (again):
    Superuser created successfully.
    ```

7.  **Запустите сервер разработки:**
    ```bash
    python manage.py runserver
    ```

### Фронтенд

1.  **Перейдите в директорию фронтенда:**
    ```bash
    cd frontend
    ```

2.  **Установите зависимости:**
    ```bash
    npm install
    ```

3.  **Запустите сервер разработки:**
    ```bash
    npm run dev
    ```

После запуска обоих серверов, откройте [http://localhost:5173/](http://localhost:5173/) в вашем браузере.

Админ панель Django доступна по адресу [http://localhost:8000/admin](http://localhost:8000/admin)

## Как это работает

1.  Пользователь вводит название, автора и текст книги (тестовый текст можно взять из файла `test_text.txt`) в форме на фронтенде.
2.  Фронтенд отправляет POST-запрос на API бэкенда.
3.  Бэкенд:
    *   Сохраняет исходные данные книги в базу данных.
    *   Отправляет текст книги в Google Gemini для получения структурированного контента (текстовые блоки и промпты для изображений).
    *   Сохраняет полученную структуру в базу данных.
    *   Для каждого промпта генерирует (или в данном случае, использует тестовые из папки `test_images`) изображения и сохраняет их.
    *   Собирает PDF-файл из текстовых блоков и сгенерированных изображений.
    *   Сохраняет сгенерированный PDF-файл в базу данных.
    *   Возвращает PDF-файл в качестве ответа на запрос.
4.  Фронтенд получает PDF-файл и предлагает пользователю его скачать.

![demo](backend/docs/demo/book.gif)